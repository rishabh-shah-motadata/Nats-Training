# ===========================================
# NATS Cluster Node 2 Configuration
# ===========================================

server_name: nats-2
listen: 0.0.0.0:4222

# ===========================================
# JetStream Configuration
# ===========================================
jetstream {
    store_dir: /data/jetstream
    max_memory_store: 268435456
    max_file_store: 1073741824
}

# ===========================================
# Cluster Configuration
# ===========================================
cluster {
    name: NATS_CLUSTER
    listen: 0.0.0.0:6222
    
    routes: [
        nats://nats-1:6222,
        nats://nats-3:6222
    ]
}

# ===========================================
# Leafnode Configuration
# ===========================================
leafnodes {
    listen: 0.0.0.0:7422
}

# ===========================================
# Accounts
# ===========================================
accounts {
    SYS: {
        users: [{user: sys, password: sys}]
    }
    
    APP: {
        users: [{user: app, password: app}]
        
        jetstream: enabled
        
        exports: [
            {stream: "$JS.API.>"}
            {stream: "$JS.ACK.>"}
            {stream: "orders.>"}
            {stream: "$JS.EVENT.>"}
            {stream: "_INBOX.>", accounts: ["*"]}
        ]
    }
}

system_account: SYS

# ===========================================
# Monitoring
# ===========================================
http_port: 8222

# ===========================================
# Logging
# ===========================================
debug: false
trace: false
logtime: true